<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Soldier of Ibyll</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/main-menu.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="css/shieldwall-styles.css">
</head>
<body>
  <!-- MAIN MENU SECTION -->
  <div id="mainMenuScreen" class="main-menu-screen">
    <div class="main-menu-container">
      <div class="game-title">
        <h1>Soldier of Ibyll</h1>
        <h2>A Paanic Empire Roguelite</h2>
      </div>
      
      <div class="menu-options">
        <button id="newGameBtn" class="main-menu-btn">New Game</button>
        <button id="loadGameBtn" class="main-menu-btn" disabled>Load Game</button>
        <button id="creditsBtn" class="main-menu-btn">Credits</button>
      </div>
      
      <div class="game-version">
        <p>Alpha Version 0.1</p>
      </div>
    </div>
  </div>

  <!-- SAVE GAME MENU - WILL BE SHOWN WHEN SAVING -->
  <div id="saveGameMenu" class="panel-overlay hidden">
    <div class="save-panel">
      <div class="panel-header">
        <h3>Save Game</h3>
        <button class="panel-close" id="closeSaveMenuBtn">×</button>
      </div>
      
      <div class="save-slots-container">
        <div id="saveSlots" class="save-slots"></div>
      </div>
      
      <div class="save-actions">
        <button id="createNewSaveBtn" class="action-btn">Create New Save</button>
      </div>
    </div>
  </div>

  <!-- LOAD GAME MENU - WILL BE SHOWN WHEN LOADING -->
  <div id="loadGameMenu" class="panel-overlay hidden">
    <div class="load-panel">
      <div class="panel-header">
        <h3>Load Game</h3>
        <button class="panel-close" id="closeLoadMenuBtn">×</button>
      </div>
      
      <div class="save-slots-container">
        <div id="loadSlots" class="save-slots"></div>
      </div>
    </div>
  </div>

  <!-- CREDITS SCREEN -->
  <div id="creditsScreen" class="panel-overlay hidden">
    <div class="credits-panel">
      <div class="panel-header">
        <h3>Credits</h3>
        <button class="panel-close" id="closeCreditsBtn">×</button>
      </div>
      
      <div class="credits-content">
        <h4>Soldier of Ibyll</h4>
        <p>A roguelite game set in the Paanic Empire</p>
        
        <h5>Development</h5>
        <p>Game Designer - Unconquerable</p>
        
        <h5>Technologies</h5>
        <p>HTML, CSS, JavaScript</p>
        
        <div class="credits-footer">
          <p>© 2023 All Rights Reserved</p>
        </div>
      </div>
    </div>
  </div>

  <!-- CHARACTER CREATION AND PROLOGUE SECTIONS -->
  <div id="creator" class="hidden">
    <!-- Step 1: Narrative Introduction & Heritage Selection -->
    <div id="intro" class="section">
      <h1>Character Creator</h1>
      <p>
        The drums of war echo across the land. From the fertile heartlands of the Paanic Empire to the rugged hills of Arras, armies gather beneath proud banners. You are one of many conscripts—an ordinary soul swept into a grand design of conquest. Whether you march across the Crownward Steppe or sail to the Arrasi Peninsula, your fate is to stand shoulder to shoulder with thousands, forging your destiny amid the chaos of the front lines.
      </p>
      <p>
        In this life of discipline and bloodshed, it matters little what station you once held; all that remains is your loyalty to the Empire, your courage under fire, and the memories of home. Yet each heritage carries its own stories, burdens, and hopes. Will you uphold the traditions of your homeland or carve a new path beneath the Empire's sun? The choice is yours, soldier.
      </p>
      <h2>Select Your Heritage</h2>
      <button id="paanic-button" class="menu-button">Heritage: Paanic</button>
      <button id="nesian-button" class="menu-button">Heritage: Nesian</button>
      <button id="lunarine-button" class="menu-button">Heritage: Lunarine</button>
      <button id="wyrdman-button" class="menu-button">Heritage: Wyrdman</button>
    </div>

    <!-- Step 2: Career Selection -->
    <div id="originSection" class="section hidden">
      <button id="back-to-intro-button" class="menu-button">&#8592; Back to Heritage Selection</button>
      <div id="originDescription"></div>
      <h2>Select Your Career</h2>
      <div id="careerOptions"></div>
      <div id="extraButtons"></div>
    </div>

    <!-- Step 3: Name Entry -->
    <div id="nameSection" class="section hidden">
      <button id="back-to-origin-button" class="menu-button">&#8592; Back to Career Selection</button>
      <h2>Enter Your Name</h2>
      <input type="text" id="nameInput" placeholder="Your character's name">
      <br>
      <button id="confirm-name-button" class="menu-button">Confirm Name</button>
    </div>

    <!-- Step 4: Final Character Summary -->
    <div id="finalOutput" class="section hidden">
      <button id="back-to-name-button" class="menu-button">&#8592; Back to Name Entry</button>
      <h2>Your Character</h2>
      <p id="characterSummary"></p>
      <button id="confirm-character-button" class="menu-button">Confirm Character</button>
    </div>

    <!-- Step 5: Prologue Screen (Career-Specific) -->
    <div id="prologueSection" class="section hidden">
      <h2>Prologue</h2>
      <div id="prologueText"></div>
      <button id="continue-to-empire-button" class="menu-button">Continue</button>
    </div>

    <!-- Step 6: Empire Update / Prologue Follow-Up -->
    <div id="empireSection" class="section hidden">
      <h2>The Empire's Crossroads</h2>
      <div id="empireText"></div>
      <button id="start-adventure-button" class="menu-button">Begin Your Adventure</button>
    </div>
  </div>

  <!-- MAIN GAME SECTION (Kasvaari Camp) -->
  <div id="gameContainer" class="hidden">
    <div class="game-layout">
      <!-- HEADER -->
      <header class="game-header">
        <h1>Kasvaari Camp</h1>
        <div id="location">Location: Kasvaari Camp, somewhere in the Western Hierarchate of Nesia</div>
        <div class="time-display-container">
          <div>
            <span class="day-night-indicator" id="dayNightIndicator"></span>
            <span id="timeDisplay">Time: 8:00 AM</span>
          </div>
          <div id="dayDisplay">Day 1</div>
        </div>
      </header>
      
      <!-- NARRATIVE SECTION -->
      <div id="narrative">
        <p>The road has been long. Nearly a season has passed since you departed the heartlands of Paan'eun, the distant spires of Cennen giving way to the endless hinterlands of the empire. Through the great riverlands and the mountain passes, across the dust-choked roads of the interior, and finally westward into the feudalscape of the Hierarchate, you have traveled. Each step has carried you further from home, deeper into the shadow of war.</p>
      </div>
      
      <!-- SIDE PANEL: Contains game controls and status bars -->
      <div class="side-panel">
        <!-- Game controls -->
        <div class="game-controls">
          <button class="control-btn" onclick="handleAction('profile')">
            <i class="fas fa-user"></i>Character Profile
          </button>
          <button class="control-btn" onclick="handleAction('inventory')">
            <i class="fas fa-backpack"></i>Inventory
          </button>
          <button class="control-btn" onclick="handleQuestLog()">
            <i class="fas fa-scroll"></i>Quest Log
          </button>
        </div>
        
        <!-- Status bars -->
        <div class="status-bars">
          <h3>Status</h3>
          
          <div class="status-bar">
            <div class="status-header">
              <div class="status-label">Health</div>
              <div id="healthValue">100/100</div>
            </div>
            <div class="bar-container">
              <div id="healthBar" class="bar health-bar" style="width: 100%;"></div>
            </div>
          </div>
          
          <div class="status-bar">
            <div class="status-header">
              <div class="status-label">Stamina</div>
              <div id="staminaValue">100/100</div>
            </div>
            <div class="bar-container">
              <div id="staminaBar" class="bar stamina-bar" style="width: 100%;"></div>
            </div>
          </div>
          
          <div class="status-bar">
            <div class="status-header">
              <div class="status-label">Morale</div>
              <div id="moraleValue">75/100</div>
            </div>
            <div class="bar-container">
              <div id="moraleBar" class="bar morale-bar" style="width: 75%;"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ACTIONS SECTION -->
      <div id="actions">
        <!-- Action buttons will be dynamically populated by updateActionButtons() -->
      </div>
    </div>
    
    <!-- Combat Interface (Hidden by default) -->
    <div id="combatInterface" class="hidden">
      <h3>Combat Encounter</h3>
      <div id="combatHeader">
        <div class="combat-health-container">
          <div>You: <span id="playerHealthDisplay">100 HP</span></div>
          <div class="combat-health-bar">
            <div id="playerCombatHealth"></div>
          </div>
        </div>
        <div class="combat-health-container">
          <div><span id="enemyName">Enemy</span>: <span id="enemyHealthDisplay">100 HP</span></div>
          <div class="combat-health-bar">
            <div id="enemyCombatHealth"></div>
          </div>
        </div>
      </div>
      <div id="combatLog">
        <p>Combat begins! Prepare yourself...</p>
      </div>
      <div id="combatActions">
        <!-- Combat buttons will be dynamically populated -->
      </div>
    </div>
    
    <!-- Profile Panel -->
    <div id="profile" class="hidden">
      <div class="panel-header">
        <h3>Character Profile</h3>
        <button class="panel-close" onclick="document.getElementById('profile').classList.add('hidden')">×</button>
      </div>
      <div id="profileText"></div>
    </div>
    
    <!-- Inventory Panel -->
    <div id="inventory" class="hidden">
      <div class="panel-header">
        <h3>Inventory</h3>
        <button class="panel-close" onclick="document.getElementById('inventory').classList.add('hidden')">×</button>
      </div>
      <div id="inventoryList">
        <!-- Inventory items will be dynamically populated -->
      </div>
    </div>
    
    <!-- Quest Log Panel -->
    <div id="questLog" class="hidden">
      <div class="panel-header">
        <h3>Quest Log</h3>
        <button class="panel-close" onclick="document.getElementById('questLog').classList.add('hidden')">×</button>
      </div>
      <div id="questList">
        <!-- Quests will be dynamically populated -->
      </div>
    </div>
  </div>
  
  <!-- QUEST SCENE CONTAINER -->
  <div id="questSceneContainer" class="hidden">
    <div class="quest-scene-layout">
      <!-- HEADER -->
      <header class="quest-header">
        <h1 id="questTitle">Quest Title</h1>
        <div id="questObjective">Current Objective</div>
        <div class="time-display-container">
          <div>
            <span class="day-night-indicator" id="questDayNightIndicator"></span>
            <span id="questTimeDisplay">Time: 8:00 AM</span>
          </div>
          <div id="questDayDisplay">Day 1</div>
        </div>
      </header>
      
      <!-- NARRATIVE SECTION -->
      <div id="questNarrative" class="quest-narrative">
        <p>Quest narrative will appear here...</p>
      </div>
      
      <!-- ACTIONS SECTION -->
      <div id="questActions" class="quest-actions">
        <!-- Quest action buttons will be dynamically populated -->
      </div>
      
      <!-- SIDE PANEL -->
      <div class="quest-side-panel">
        <!-- Status indicators -->
        <div class="quest-status-panel">
          <h3>Status</h3>
          
          <div class="status-bar">
            <div class="status-header">
              <div class="status-label">Health</div>
              <div id="questHealthValue">100/100</div>
            </div>
            <div class="bar-container">
              <div id="questHealthBar" class="bar health-bar" style="width: 100%;"></div>
            </div>
          </div>
          
          <div class="status-bar">
            <div class="status-header">
              <div class="status-label">Stamina</div>
              <div id="questStaminaValue">100/100</div>
            </div>
            <div class="bar-container">
              <div id="questStaminaBar" class="bar stamina-bar" style="width: 100%;"></div>
            </div>
          </div>
          
          <div class="status-bar">
            <div class="status-header">
              <div class="status-label">Morale</div>
              <div id="questMoraleValue">75/100</div>
            </div>
            <div class="bar-container">
              <div id="questMoraleBar" class="bar morale-bar" style="width: 75%;"></div>
            </div>
          </div>
        </div>
        
        <!-- Quest progress indicator -->
        <div class="quest-progress">
          <h3>Mission Progress</h3>
          <div class="quest-progress-track">
            <div class="quest-progress-steps" id="questProgressSteps">
              <!-- Will be populated dynamically -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div id="notification" class="notification"></div>

  <!-- Load all JavaScript modules in the correct order -->
  <script src="js/data/origins.js"></script>
  <script src="js/data/careers.js"></script>
  <script src="js/data/narrative.js"></script>
  <script src="js/items.js"></script>
  <script src="js/inventory.js"></script> 
  <script src="js/inventory-ui.js"></script>
  <script src="js/gameState.js"></script>
  <script src="js/characterCreation.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/actions.js"></script>
  <script src="js/quartermasterSystem.js"></script>
  <script src="js/shieldwallSystem.js"></script>
  <script src="js/shieldwallTutorial.js"></script>
  <script src="js/saveLoadSystem.js"></script>
  <script src="js/main.js"></script>
  <script src="js/combatSystem.js"></script>
  <script src="js/combatSystemRouter.js"></script>
  <script src="js/combatUI.js"></script>
  <script src="js/questSystem.js"></script>
  <script src="js/questRewards.js"></script>
  <script src="js/reward-system-integration.js"></script>
</body>
</html>